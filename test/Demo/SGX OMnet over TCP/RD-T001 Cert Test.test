<?xml version="1.0" encoding="ASCII"?>
<TestUnit:TestContainerType xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:CertificationCommands="com.esprow.nozomi.testunit.commands.certification" xmlns:TestUnit="com.esprow.nozomi.testunit" formatVersion="2.0">
  <test comment="This certification test checks the querying of reference data (DQ124)." loggingLevel="DEBUG" certificationUnit="true" dictionary="SGX_OMnet" implementsBridgeMode="true">
    <testCommand xsi:type="CertificationCommands:CreateMessageRelayCommand" targetSystemId="%CONFIGURATIONS.CERTIFICATION.SYSTEM%" targetHandlerId="%CONFIGURATIONS.CERTIFICATION.DESTINATION%" forwardSystemId="%CONFIGURATIONS.CERTIFICATION.BRIDGE.SYSTEM%" forwardHandlerId="%CONFIGURATIONS.CERTIFICATION.BRIDGE.DESTINATION%" filterShowOnly="true">
      <messageTypeFilters>DQ124</messageTypeFilters>
      <messageTypeFilters>DA124</messageTypeFilters>
      <messageTypeFilters>LOGIN_DEPRECATED</messageTypeFilters>
      <messageTypeFilters>LOGIN_ENCRYPTED</messageTypeFilters>
    </testCommand>
    <testCommand xsi:type="TestUnit:LogEntry" disabled="true" text="# Pre-conditions"/>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand" timeout="-1">
      <instructionMultiLanguage key="en" value="Please make sure that your system is connected to the SGX TITAN Environment, and that you have subscribed to BU122 (or BU10), BU120 (or BU4), BU124 (or BU2), BU2, BU126 (or BU5), BU18, BU78, BU1002, BU1005 broadcasts."/>
    </testCommand>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand">
      <instructionMultiLanguage key="en" value="You have been assigned the following instrument series and market for this test:&#xD;&#xA;&#xD;&#xA;   Series: %CONFIGURATIONS.Series_Name%&#xD;&#xA;   Market: %CONFIGURATIONS.Market_Name%&#xD;&#xA;&#xD;&#xA;Please use this data in all steps where a specific series, underlying, market, etc. is required."/>
    </testCommand>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand" disabled="true">
      <instructionMultiLanguage key="en" value="Please submit a DQ124 to query all tradable series in Market 1."/>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" disabled="true" messageSenderProducer="//@test/@testCommand.0" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.facility_type_u" value="710" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.parameter_u" value="64000" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.function_code_u" value="66049" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.parameter_2_u" value="0" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.server_type_c" value="Q" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.country_c" value="83" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.market_c" value="158" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.instrument_group_c" value="50" fieldType="BigDecimal"/>
      <messageType>DQ124</messageType>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" disabled="true" messageId="" messageSenderProducer="//@test/@testCommand.0" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true" outgoingMessage="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_response_t[].header_response_t.return_value_i" value="0" fieldType="Integer"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.server_type_c" value="A" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.items_n" value="0" checkType="NOTEQUAL" fieldType="BigDecimal"/>
      <messageType>DA124</messageType>
    </testCommand>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand" disabled="true" variableId="Response" requireUserInput="true">
      <instructionMultiLanguage key="en" value="Did you receive DA124 with all tradable series in Market 1?&#xD;&#xA;(Enter y for yes, n for no)"/>
    </testCommand>
    <testCommand xsi:type="TestUnit:IfStatementCommand" disabled="true">
      <testCommand xsi:type="TestUnit:IfThenElseStatementBlock" disabled="true" logicStatement="&quot;%VARIABLES.Response%&quot;!=&quot;y&quot; &amp;&amp; &quot;%VARIABLES.Response%&quot;!=&quot;yes&quot;">
        <testCommand xsi:type="TestUnit:FailCommand" disabled="true" text="You should have received DA124 with all tradable series in Market 1."/>
      </testCommand>
    </testCommand>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand" disabled="true">
      <instructionMultiLanguage key="en" value="Please submit a DQ124 to query all tradable series in Market 2."/>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" disabled="true" messageSenderProducer="//@test/@testCommand.0" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.facility_type_u" value="710" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.parameter_u" value="64000" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.function_code_u" value="66049" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_request_t[].header_request_t.parameter_2_u" value="0" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.server_type_c" value="Q" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.country_c" value="83" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.market_c" value="153" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.instrument_group_c" value="50" fieldType="BigDecimal"/>
      <messageType>DQ124</messageType>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" disabled="true" messageId="" messageSenderProducer="//@test/@testCommand.0" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true" outgoingMessage="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="StandardHeader.header_response_t[].header_response_t.return_value_i" value="0" fieldType="Integer"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.server_type_c" value="A" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="answer_segment_hdr_t[].answer_segment_hdr_t.items_n" value="0" checkType="NOTEQUAL" fieldType="BigDecimal"/>
      <messageType>DA124</messageType>
    </testCommand>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand" disabled="true" variableId="Response" requireUserInput="true">
      <instructionMultiLanguage key="en" value="Did you receive DA124 with all tradable series in Market 2?&#xD;&#xA;(Enter y for yes, n for no)"/>
    </testCommand>
    <testCommand xsi:type="TestUnit:IfStatementCommand" disabled="true">
      <testCommand xsi:type="TestUnit:IfThenElseStatementBlock" disabled="true" logicStatement="&quot;%VARIABLES.Response%&quot;!=&quot;y&quot; &amp;&amp; &quot;%VARIABLES.Response%&quot;!=&quot;yes&quot;">
        <testCommand xsi:type="TestUnit:FailCommand" disabled="true" text="You should have received DA124 with all tradable series in Market 2."/>
      </testCommand>
    </testCommand>
    <testCommand xsi:type="TestUnit:PauseCommand" disabled="true" length="90"/>
    <testCommand xsi:type="TestUnit:ClearMessageQueue" messageSenderProducer="//@test/@testCommand.0" incoming="false" outgoing="true"/>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand">
      <instructionMultiLanguage key="en" value="Please submit a DQ124 to query all tradable instrument series in all markets."/>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" messageSenderProducer="//@test/@testCommand.0" messageCount="1" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true" removeMatched="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.server_type_c" value="Q" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.segment_number_n" value="1" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.download_ref_number_q" value="0" fieldType="Long"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.series[].series_t.market_c" value="0 || %CONFIGURATIONS.Series_Market%" fieldType="BigDecimal"/>
      <messageType>DQ124</messageType>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" messageId="DA124" messageSenderProducer="//@test/@testCommand.0" messageCount="1" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true" outgoingMessage="true" removeMatched="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.server_type_c" value="A" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <messageType>DA124</messageType>
    </testCommand>
    <testCommand xsi:type="TestUnit:NewVar" variableId="Segment_No" value="%MESSAGES.DA124.answer_segment_hdr_t[].answer_segment_hdr_t.segment_number_n%"/>
    <testCommand xsi:type="TestUnit:NewVar" variableId="DQ124_DL_Ref_No" value="%MESSAGES.DA124.ns_delta_header_t[].ns_delta_header_t.download_ref_number_q%"/>
    <testCommand xsi:type="TestUnit:WhileLoopCommand" logicStatement="%VARIABLES.Segment_No%!=0" maxIterationSafety="">
      <testCommand xsi:type="TestUnit:WaitCommand" messageSenderProducer="//@test/@testCommand.0" messageCount="1" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true" removeMatched="true">
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.server_type_c" value="Q" fieldType="Char"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.segment_number_n" value="%VARIABLES.Segment_No%+1" fieldType="BigDecimal"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="query_delta_t[].query_delta_t.series[].series_t.market_c" value="0 || %CONFIGURATIONS.Series_Market%" fieldType="BigDecimal"/>
        <messageType>DQ124</messageType>
      </testCommand>
      <testCommand xsi:type="TestUnit:WaitCommand" messageId="DA124" messageSenderProducer="//@test/@testCommand.0" messageCount="1" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true" outgoingMessage="true" removeMatched="true">
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.server_type_c" value="A" fieldType="Char"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" path="answer_segment_hdr_t[].answer_segment_hdr_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
        <messageType>DA124</messageType>
      </testCommand>
      <testCommand xsi:type="TestUnit:NewVar" variableId="Segment_No" value="%MESSAGES.DA124.answer_segment_hdr_t[].answer_segment_hdr_t.segment_number_n%"/>
      <testCommand xsi:type="TestUnit:LogEntry" text="Segment var: %VARIABLES.Segment_No%"/>
      <testCommand xsi:type="TestUnit:LogEntry" text="Segment msg: %MESSAGES.DA124.answer_segment_hdr_t[].answer_segment_hdr_t.segment_number_n%"/>
      <testCommand xsi:type="TestUnit:NewVar" variableId="DQ124_DL_Ref_No" value="%MESSAGES.DA124.ns_delta_header_t[].ns_delta_header_t.download_ref_number_q%"/>
    </testCommand>
    <testCommand xsi:type="TestUnit:GetInteractiveFeedbackCommand" variableId="Response" requireUserInput="true">
      <instructionMultiLanguage key="en" value="Did you receive DA124 answer(s) with all tradable instrument series in all markets?&#xD;&#xA;(Enter y for yes, n for no)"/>
    </testCommand>
    <testCommand xsi:type="TestUnit:IfStatementCommand">
      <testCommand xsi:type="TestUnit:IfThenElseStatementBlock" logicStatement="eval(&quot;! equalsIgnoreCase(&quot;%VARIABLES.Response%&quot;, &quot;y&quot;) &amp;&amp; ! equalsIgnoreCase(&quot;%VARIABLES.Response%&quot;, &quot;yes&quot;)&quot;)">
        <testCommand xsi:type="TestUnit:FailCommand" text="You should have received DA124 answer(s) with all tradable instrument series in all markets."/>
      </testCommand>
    </testCommand>
    <testCommand xsi:type="TestUnit:NewVar" disabled="true" variableId="Segment_No" value="1"/>
    <testCommand xsi:type="TestUnit:ForLoopCommand" disabled="true" dataSetId="i" dataSetProviderType="RANGE">
      <testCommand xsi:type="TestUnit:WaitCommand" disabled="true" messageSenderProducer="//@test/@testCommand.0" messageCount="1" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true">
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.server_type_c" value="Q" fieldType="Char"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.segment_number_n" value="%VARIABLES.Segment_No%" fieldType="BigDecimal"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.download_ref_number_q" value="0" fieldType="Long"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.market_c" value="0" fieldType="BigDecimal"/>
        <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.filler_2_s" value="0,0" fieldType="BigDecimalArray"/>
        <messageType>DQ124</messageType>
      </testCommand>
      <testCommand xsi:type="TestUnit:NewVar" disabled="true" variableId="Segment_No" value="%VARIABLES.Segment_No%+1"/>
      <dataSetProvider xsi:type="TestUnit:RangeDataSetProvider" skipColumnName="SKIP_TEST" executingTagColumnName="EXEC_TAG" loopCounterStart="1" loopCounterEnd="20" loopStep="1"/>
    </testCommand>
    <testCommand xsi:type="TestUnit:WaitCommand" disabled="true" messageSenderProducer="//@test/@testCommand.0" messageCount="1" timeout="-1" searchFromLastMatch="true" searchFromLastMatchCombined="true">
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.central_module_c" value="D" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.server_type_c" value="Q" fieldType="Char"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.transaction_type[].transaction_type_t.transaction_number_n" value="124" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.segment_number_n" value="%VARIABLES.Segment_No%" fieldType="BigDecimal"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.download_ref_number_q" value="0" fieldType="Long"/>
      <testCommand xsi:type="TestUnit:CreateFieldValueCheckCommand" disabled="true" path="query_delta_t[].query_delta_t.series[].series_t.market_c" value="0" fieldType="BigDecimal"/>
      <messageType>DQ124</messageType>
    </testCommand>
  </test>
</TestUnit:TestContainerType>
